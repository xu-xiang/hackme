# 利用Apache解析漏洞（CVE-2017-15715）进行文件后缀过滤黑名单绕过
2.4.0~2.4.29版本中存在一个解析漏洞，在解析PHP时，例如hack.php\x0A 将被按照PHP后缀进行解析，导致绕过一些服务器的安全策略。

## 快速搭建环境
1. 创建本地目录 {本地目录}
2. 给该目录配置写权限
3. 该目录下创建upload.php 用于过滤危险后缀（黑名单）并保存文件
<?php
if(isset($_FILES['file'])) {
    $name = basename($_POST['name']);
    $ext = pathinfo($name,PATHINFO_EXTENSION);
    if(in_array($ext, ['php', 'php3', 'php4', 'php5', 'phtml', 'pht'])) {
        exit('bad file');
    }
    move_uploaded_file($_FILES['file']['tmp_name'], './' . $name);
}

4. docker run -d -p 8080:80 -v {本地目录}:/var/www/html --name apache php:5.5-apache





# 参考
https://github.com/vulhub/vulhub/tree/master/httpd/CVE-2017-15715
https://www.leavesongs.com/PENETRATION/apache-cve-2017-15715-vulnerability.html